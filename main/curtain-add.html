<!DOCTYPE html>
<html>

<head>
    <!-- 页面meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">




    <title>后台管理页面</title>
    <meta name="description" content="main">




    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.6 -->
    <!-- Font Awesome -->
    <!-- Ionicons -->
    <!-- iCheck -->
    <!-- Morris chart -->
    <!-- jvectormap -->
    <!-- Date Picker -->
    <!-- Daterange picker -->
    <!-- Bootstrap time Picker -->
    <!--<link rel="stylesheet" href="../../../plugins/timepicker/bootstrap-timepicker.min.css">-->
    <!-- bootstrap wysihtml5 - text editor -->
    <!--数据表格-->
    <!-- 表格树 -->
    <!-- select2 -->
    <!-- Bootstrap Color Picker -->
    <!-- bootstrap wysihtml5 - text editor -->
    <!--bootstrap-markdown-->
    <!-- Theme style -->
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <!-- Ion Slider -->
    <!-- ion slider Nice -->
    <!-- bootstrap slider -->
    <!-- bootstrap-datetimepicker -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->




    <!-- jQuery 2.2.3 -->
    <!-- jQuery UI 1.11.4 -->
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <!-- Bootstrap 3.3.6 -->
    <!-- Morris.js charts -->
    <!-- Sparkline -->
    <!-- jvectormap -->
    <!-- jQuery Knob Chart -->
    <!-- daterangepicker -->
    <!-- datepicker -->
    <!-- Bootstrap WYSIHTML5 -->
    <!-- Slimscroll -->
    <!-- FastClick -->
    <!-- iCheck -->
    <!-- AdminLTE App -->
    <!-- 表格树 -->
    <!-- select2 -->
    <!-- bootstrap color picker -->
    <!-- bootstrap time picker -->
    <!--<script src="../../../plugins/timepicker/bootstrap-timepicker.min.js"></script>-->
    <!-- Bootstrap WYSIHTML5 -->
    <!--bootstrap-markdown-->
    <!-- CK Editor -->
    <!-- InputMask -->
    <!-- DataTables -->
    <!-- ChartJS 1.0.1 -->
    <!-- FLOT CHARTS -->
    <!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized -->
    <!-- FLOT PIE PLUGIN - also used to draw donut charts -->
    <!-- FLOT CATEGORIES PLUGIN - Used to draw bar charts -->
    <!-- jQuery Knob -->
    <!-- Sparkline -->
    <!-- Morris.js charts -->
    <!-- Ion Slider -->
    <!-- Bootstrap slider -->
    <!-- bootstrap-datetimepicker -->
    <!-- 页面meta /-->

    <link rel="stylesheet" href="../static/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../static/plugins/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="../static/plugins/iCheck/square/blue.css">
    <link rel="stylesheet" href="../static/plugins/morris/morris.css">
    <link rel="stylesheet" href="../static/plugins/jvectormap/jquery-jvectormap-1.2.2.css">
    <link rel="stylesheet" href="../static/plugins/datepicker/datepicker3.css">
    <link rel="stylesheet" href="../static/plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="../static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <link rel="stylesheet" href="../static/plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="../static/plugins/treeTable/jquery.treetable.css">
    <link rel="stylesheet" href="../static/plugins/treeTable/jquery.treetable.theme.default.css">
    <link rel="stylesheet" href="../static/plugins/select2/select2.css">
    <link rel="stylesheet" href="../static/plugins/colorpicker/bootstrap-colorpicker.min.css">
    <link rel="stylesheet" href="../static/plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
    <link rel="stylesheet" href="../static/plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="../static/plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="../static/plugins/ionslider/ion.rangeSlider.css">
    <link rel="stylesheet" href="../static/plugins/ionslider/ion.rangeSlider.skinNice.css">
    <link rel="stylesheet" href="../static/plugins/bootstrap-slider/slider.css">
    <link rel="stylesheet" href="../static/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css">
</head>

<body class="hold-transition skin-purple sidebar-mini" >

    <div class="wrapper">

        <!-- 页面头部 -->
       <div class="header"></div>
        <!-- 页面头部 /-->

        <!-- 导航侧栏 -->
       <div class="aside"></div>
        <!-- 导航侧栏 /-->

        <!-- 内容区域 -->
        <div class="content-wrapper">

            <!-- 内容头部 -->
            <section class="content-header">
                <h1>
                    窗帘管理 <small>窗帘设备</small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="main.html"><i
                            class="fa fa-dashboard"></i> 首页</a></li>
                    <li><a
                            href="curtain-list.html">设备管理</a></li>

                    <li class="active">设备添加</li>
                </ol>
            </section>
            <!-- 内容头部 /-->

            <!-- 正文区域 -->
            <form id="curtain_save"
                  method="post">
                <!-- 正文区域 -->
                <section class="content"> <!--产品信息-->

                    <div class="panel panel-default">
                        <div class="panel-heading">窗帘信息
                            <div id="errorMsg" style="color:red;text-align: center"></div>
                        </div>
                        <div class="row data-type">

                            <div class="col-md-2 title">温度(℃)</div>
                            <div class="col-md-4 data">
                                <input type="text" class="form-control" name="Stem" id="Stem"
                                       placeholder="温度(℃)" value="">
                            </div>
                            <div class="col-md-2 title">湿度(%)</div>
                            <div class="col-md-4 data">
                                <input type="text" class="form-control" name="Shumidity" id="Shumidity"
                                       placeholder="湿度(%)" value="">
                            </div>
                            <div class="col-md-2 title">设备ID</div>
                            <div class="col-md-4 data">
                                <input type="text" class="form-control" name="cid" id="cid"
                                       placeholder="设备ID" value="">
                            </div>

                        </div>
                    </div>
                    <!--订单信息/--> <!--工具栏-->
                    <div class="box-tools text-center">
                        <button type="submit" class="btn bg-maroon" >保存</button>
                        <button type="button" class="btn bg-default"
                                onclick="history.back(-1);">返回</button>
                    </div>
                    <!--工具栏/--> </section>
                <!-- 正文区域 /-->
            </form>
            <!-- 正文区域 /-->

        </div>
        <!-- 内容区域 /-->

        <!-- 底部导航 -->
        <div class="footer"></div>
        <!-- 底部导航 /-->

    </div>


    <script src="../static/plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="../static/plugins/jQueryUI/jquery-ui.min.js"></script>
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <script src="../static/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="../static/plugins/raphael/raphael-min.js"></script>
    <script src="../static/plugins/morris/morris.min.js"></script>
    <script src="../static/plugins/sparkline/jquery.sparkline.min.js"></script>
    <script src="../static/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="../static/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="../static/plugins/knob/jquery.knob.js"></script>
    <script src="../static/plugins/daterangepicker/moment.min.js"></script>
    <script src="../static/plugins/daterangepicker/daterangepicker.js"></script>
    <script src="../static/plugins/daterangepicker/daterangepicker.zh-CN.js"></script>
    <script src="../static/plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="../static/plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>
    <script src="../static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script src="../static/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <script src="../static/plugins/fastclick/fastclick.js"></script>
    <script src="../static/plugins/iCheck/icheck.min.js"></script>
    <script src="../static/plugins/adminLTE/js/app.min.js"></script>
    <script src="../static/plugins/treeTable/jquery.treetable.js"></script>
    <script src="../static/plugins/select2/select2.full.min.js"></script>
    <script src="../static/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="../static/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.zh-CN.js"></script>
    <script src="../static/plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
    <script src="../static/plugins/bootstrap-markdown/locale/bootstrap-markdown.zh.js"></script>
    <script src="../static/plugins/bootstrap-markdown/js/markdown.js"></script>
    <script src="../static/plugins/bootstrap-markdown/js/to-markdown.js"></script>
    <script src="../static/plugins/ckeditor/ckeditor.js"></script>
    <script src="../static/plugins/input-mask/jquery.inputmask.js"></script>
    <script src="../static/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="../static/plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <script src="../static/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="../static/plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="../static/plugins/chartjs/Chart.min.js"></script>
    <script src="../static/plugins/flot/jquery.flot.min.js"></script>
    <script src="../static/plugins/flot/jquery.flot.resize.min.js"></script>
    <script src="../static/plugins/flot/jquery.flot.pie.min.js"></script>
    <script src="../static/plugins/flot/jquery.flot.categories.min.js"></script>
    <script src="../static/plugins/ionslider/ion.rangeSlider.min.js"></script>
    <script src="../static/plugins/bootstrap-slider/bootstrap-slider.js"></script>
    <script src="../static/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
    <script src="../static/plugins/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="../static/plugins/template-web/template-web.js"></script>


    <script>
        $(function () {
            $(".header").load("header.html");
            $(".aside").load("aside.html");

        });
        window.onload = function getUser() {
            var t = new Date();
            var hour = t.getHours();
            var minute = t.getMinutes();
            var second = t.getSeconds();
            var showTime = hour+((minute<10)?":0":":")+minute+((second<10)?":0":":")+second+((hour>12)?"PM":"AM");
            $("#time").text(showTime);

            $.get({
                url:"../Main/getUser",
                success:function(data){
                    $("#username1").text(data);
                    $("#username2").text(data);
                    $("#username3").text(data);
                }
            });

        };
        /*
                       表单校验：
                           1.用户名：单词字符，长度3到13位
                           2.密码：单词字符，长度8到20位
                           3.email：邮件格式
                           4.验证码：非空
                    */
        //校验温度数值
        function checkStem() {
            var Stem = $('#Stem').val();
            var reg_Stem = /^[1-9][0-9]?$/;

            var flag = reg_Stem.test(Stem);
            if (flag) {
                //用户名合法
                $("#Stem").css("border", "");
            } else {
                $("#Stem").css("border", "1px solid red");
            }
            return flag;

        }

        //检验湿度数值
        function checkShumidity() {
            var Shumidity = $('#Shumidity').val();

            var reg_Shumidity =/^[1-9][0-9]?$/;

            var flag = reg_Shumidity.test(Shumidity);
            if (flag) {
                $('#Shumidity').css("border", "");
            } else {
                $('#Shumidity').css("border", "1px solid red");
            }
            return flag;
        }

        //校验cid
        function checkcid() {
            //1.获取密码值
            var cid = $("#cid").val();

            if (cid.length >0) {
                $("#cid").css("border", "");
                return true;
            } else {
                $("#cid").css("border", "1px solid red");
                return false;
            }
        }
        $(function () {
            //当表单提交时，调用所有的校验方法
            $("#curtain_save").submit(function () {
                //发送数据到服务器
                if (checkStem() && checkShumidity() && checkcid()) {
                    //校验通过,发送ajax请求，提交表单的数据   username=zhangsan&password=123
                    $.post({
                        url: "../Curtain/addCurtain",
                        dataType: 'json',
                        contentType: 'application/json;charset=utf-8',
                        //traditional 为true阻止深度序列化
                        traditional: true,
                        data: JSON.stringify({
                            Stem: $("#Stem").val(),
                            Shumidity: $("#Shumidity").val(),
                            cid: $("#cid").val(),
                        }),
                        success: function (data) {
                            if (data.flag) {
                                alert("添加成功！");
                                //添加成功，跳转成功页面
                                $(window).attr('location', "curtain-list.html");
                            } else {
                                //注册失败,给errorMsg添加提示信息
                                $("#errorMsg").html(data.errorMsg);
                                console.log(data.errorMsg)
                                alert(data.errorMsg);
                            }
                        }
                    });

                }
                //2.不让页面跳转
                return false;
                //如果这个方法没有返回值，或者返回为true，则表单提交，如果返回为false，则表单不提交
            });
            $("#Stem").blur(checkStem);
            $("#Shumidity").blur(checkShumidity);
            $("#cid").blur(checkcid);
        });



        $(document).ready(function() {
            // 选择框
            $(".select2").select2();

            // WYSIHTML5编辑器
            $(".textarea").wysihtml5({
                locale: 'zh-CN'
            });
        });

        // 设置激活菜单
        function setSidebarActive(tagUri) {
            var liObj = $("#" + tagUri);
            if (liObj.length > 0) {
                liObj.parent().parent().addClass("active");
                liObj.addClass("active");
            }
        }


        $(document).ready(function() {
            // 激活导航位置
            setSidebarActive("admin-index");

            // 列表按钮
            $("#dataList td input[type='checkbox']").iCheck({
                checkboxClass : 'icheckbox_square-blue',
                increaseArea : '20%'
            });
            // 全选操作
            $("#selall").click(function() {
                var clicks = $(this).is(':checked');
                if (!clicks) {
                    $("#dataList td input[type='checkbox']").iCheck("uncheck");
                } else {
                    $("#dataList td input[type='checkbox']").iCheck("check");
                }
                $(this).data("clicks", !clicks);
            });
        });
    </script>
</body>

</html>
<!---->